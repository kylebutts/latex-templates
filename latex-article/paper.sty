% Margins ----------------------------------------------------------------------
\usepackage[margin=1in]{geometry}

% Line Spacing -----------------------------------------------------------------
\renewcommand{\baselinestretch}{1.5}
\usepackage{setspace}

% Math stuff -------------------------------------------------------------------
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{bm}

% Font -------------------------------------------------------------------------

% T1 removes errors for things like \textbackslash
\usepackage[T1]{fontenc}
\usepackage{inputenc}

% Serif option:
% Libertine for serif text font
\usepackage{libertine}
% Source Code Pro for monospace font
\usepackage[scale=0.88]{plex-mono}
\renewcommand{\ttdefault}{\plexmonofamily}

% Sans-serif option:
% % Lato for sans-serif text font
% \usepackage[default]{lato}
% % Source Code Pro for monospace font
% \usepackage[scale=0.95]{plex-mono}
% \renewcommand{\ttdefault}{\plexmonofamily} 

% Small adjustments to text kerning
\usepackage{microtype}

% Define Theorems --------------------------------------------------------------
% Put proper spacing after Theorem #. 
\newtheoremstyle{spacing}
{}%          Space above, empty = `usual value'
{}%          Space below
{}%  Body font
{}%          Indent amount (empty = no indent, \parindent = para indent)
{\bfseries}% Thm head font
{.}%         Punctuation after thm head
{2.5mm}%  Space after thm head: \newline = linebreak
{}%          Thm head spec

% note, theorem is the name that goes in \begin{} and Theorem is the name displayed as Theorem 1
\theoremstyle{spacing}
\newtheorem{theorem}{Theorem}
\newcommand{\theoremautorefname}{Theorem}
\newtheorem{proposition}{Proposition}
\newcommand{\propositionautorefname}{Proposition}
\newtheorem{assumption}{Assumption}
\newcommand{\assumptionautorefname}{Assumption}
\newtheorem{example}{Example}
\newcommand{\exampleautorefname}{Example}
\newtheorem{lemma}{Lemma}
\newcommand{\lemmaautorefname}{Lemma}
\newtheorem{corollary}{Corollary}
\newcommand{\corollaryautorefname}{Corollary}
\newtheorem{definition}{Definition}
\newcommand{\definitionautorefname}{Definition}
\newtheorem{remark}{Remark}
\newcommand{\remarkautorefname}{Remark}

% Appendix ---------------------------------------------------------------------

\AtBeginEnvironment{appendix}{
% \AfterEndEnvironment{thebibliography}{
  \setcounter{theorem}{0}
  \setcounter{proposition}{0} 
  \setcounter{lemma}{0}
  \setcounter{corollary}{0}
  \setcounter{definition}{0}
  \setcounter{assumption}{0}
  \setcounter{remark}{0}
  \setcounter{table}{0}
  \setcounter{figure}{0}
  \setcounter{equation}{0} 
  \numberwithin{equation}{section}
  \numberwithin{figure}{section}
  \numberwithin{table}{section}
  \renewcommand{\thetheorem}{\Alph{section}\arabic{theorem}}
  \renewcommand{\theproposition}{\Alph{section}\arabic{proposition}}
  \renewcommand{\thelemma}{\Alph{section}\arabic{lemma}}
  \renewcommand{\thecorollary}{\Alph{section}\arabic{corollary}}
  \renewcommand{\thedefinition}{\Alph{section}\arabic{definition}}
  \renewcommand{\theassumption}{\Alph{section}\arabic{assumption}}
  \renewcommand{\theremark}{\Alph{section}\arabic{remark}}
  \renewcommand{\thetable}{\Alph{section}\arabic{table}}
  \renewcommand{\thefigure}{\Alph{section}\arabic{figure}}
  \renewcommand{\theequation}{\Alph{section}\arabic{equation}}
}

% Color Palette ----------------------------------------------------------------
\usepackage{xcolor}

% High contrast colors
\definecolor{purple}{HTML}{5601A4}
\definecolor{cranberry}{HTML}{E64173}
\definecolor{orange}{HTML}{D65616}
\definecolor{navy}{HTML}{006896}
\definecolor{teal}{HTML}{1A505A}
\newcommand\purple[1]{{\color{purple}#1}}
\newcommand\cranberry[1]{{\color{cranberry}#1}}
\newcommand\orange[1]{{\color{orange}#1}}
\newcommand\navy[1]{{\color{navy}#1}}
\newcommand\teal[1]{{\color{teal}#1}}

% Kyle's colors
\definecolor{ruby}{HTML}{9a2515}
\definecolor{alice}{HTML}{107895}
\definecolor{daisy}{HTML}{EBC944}
\definecolor{coral}{HTML}{F26D21}
\definecolor{kelly}{HTML}{829356}
\definecolor{jet}{HTML}{131516}
\definecolor{asher}{HTML}{555F61}
\definecolor{slate}{HTML}{314F4F}
\newcommand\kelly[1]{{\color{kelly}#1}}
\newcommand\ruby[1]{{\color{ruby}#1}}
\newcommand\alice[1]{{\color{alice}#1}}
\newcommand\daisy[1]{{\color{daisy}#1}}
\newcommand\coral[1]{{\color{coral}#1}}
\newcommand\slate[1]{{\color{slate}#1}}
\newcommand\jet[1]{{\color{jet}#1}}
\newcommand\asher[1]{{\color{asher}#1}}

% Zinc from Tailwind Colors
\definecolor{zinc50}{HTML}{fafafa}
\definecolor{zinc100}{HTML}{f4f4f5}
\definecolor{zinc200}{HTML}{e4e4e7}
\definecolor{zinc300}{HTML}{d4d4d8}
\definecolor{zinc400}{HTML}{a1a1aa}
\definecolor{zinc500}{HTML}{71717a}
\definecolor{zinc600}{HTML}{52525b}
\definecolor{zinc700}{HTML}{3f3f46}
\definecolor{zinc800}{HTML}{27272a}
\definecolor{zinc900}{HTML}{18181b}
\definecolor{zinc950}{HTML}{09090b}

% Hyperlinks -------------------------------------------------------------------
\usepackage[
  breaklinks=true
]{hyperref}
\hypersetup{
  colorlinks = true,
  allcolors = purple
}

% References -------------------------------------------------------------------
% You can use either biblatex or natbib, see https://tex.stackexchange.com/questions/25701/bibtex-vs-biber-and-biblatex-vs-natbib for discussion

% % Natbib
% \usepackage{natbib}
% \bibliographystyle{econ-aea}

% Biblatex
% To use, do the following:
% 1. Add \addbibresource{references.bib} before \begin{document}
% 2. Replace \bibliography{references.bib} with ``
% 
% Source: https://social-science-data-editors.github.io/guidance/citations/guidance_data_citations_biblatex.pdf
% https://tex.stackexchange.com/questions/604482/add-hyperref-links-at-the-end-of-bib-items-pointing-back-to-the-pages-where-the
\usepackage[
  style = chicago-authordate,
  doi = true, 
  backend = biber,
  backref=true, % Prints back references e.g (cit. pp. 1)
  backrefstyle=none, % How to sequence page numbers in back references
  hyperref=true, % Enables hyperref
  indexing=true,
  natbib = true
]{biblatex}
\usepackage[authordate, backend = biber]{biblatex-chicago}

% change display of DOI fields
\DeclareFieldFormat{doi}{%
  \ifhyperref{%
    \href{https://doi.org/#1}{\nolinkurl{https://doi.org/#1}}}
    {\nolinkurl{https://doi.org/#1}}
}

% Reduced spacing in bibliography
\AtBeginEnvironment{thebibliography}{\setstretch{1.1}}

% Breaks long citations to new lines
\usepackage{breakcites}

% Section and Subsection Styling -----------------------------------------------
\usepackage[explicit]{titlesec}

\titleformat{\section}
  {\large \bf}
  {\thesection \,---}
  {0.25em}
  {#1}
  
\titleformat{\subsection}
  {\fontsize{12}{10}\it}
  {\thesubsection.}
  {1em}
  {#1}

% Latex Programming tools ------------------------------------------------------
% \AtBeginEnvironment
\usepackage{etoolbox}
\usepackage{xparse}

% Remove annoying over-full box warnings
\vfuzz=2pt 
\hfuzz=2pt

% Coauthors comments that you can hide -----------------------------------------
% Define in the main document:
% \booltrue{INCLUDECOMMENTS}
% \newcommand{\kyle}[1]{\comment[Kyle]{#1}}
\newbool{INCLUDECOMMENTS}
\NewDocumentCommand{\coauthorComment}{O{NAME} +m}{%
    \ifbool{INCLUDECOMMENTS}{{\color{cranberry}\textbf{#1:} #2}}{}
}

% Titlepage --------------------------------------------------------------------
% Update \maketitle command
\def\@maketitle{%
  \vspace*{\bigskipamount}

  \begin{flushleft}%
  \let \footnote \thanks
    {\huge \@title \par}%
    
    \medskip
    {\large \@author \par}%

    \smallskip
    {\color{asher} \@date}%
  \end{flushleft}%
}

% Abstract
\renewenvironment{abstract}
 {\noindent\rule{\linewidth}{.5pt}\noindent}
 {\noindent\rule{\linewidth}{.5pt}}

% alternative abstract
% \renewenvironment{abstract}
% {
%   \centerline {\large \bfseries \scshape  Abstract}
%   \begin{quote}
% }
% {\end{quote}}


% Footnote ---------------------------------------------------------------------
% Spacing between footnotes on same page
\addtolength{\footnotesep}{1mm}

% Space after footnote number
\let\oldfootnote\footnote
\renewcommand\footnote[1]{\oldfootnote{\ #1}}

% No footnote line
\renewcommand\footnoterule{}

% No supsercript in footer
\makeatletter
\renewcommand\@makefntext[1]{%
    \parindent 1em \noindent
    \hb@xt@1.8em{\hss\normalfont\@thefnmark.\hfill}#1
  }
\makeatother

% Enumerate/Itemize ------------------------------------------------------------
\usepackage[shortlabels]{enumitem}
% \setitemize{labelindent=0.5em,labelsep=0.25cm,leftmargin=*}
% \setenumerate{labelindent=0.5em,labelsep=0.25cm,leftmargin=*}
\setlist{nosep}
\setlist[itemize,1]{leftmargin=\parindent,label=\color{zinc600}{\upshape\textbullet}}
\setlist[itemize,2]{leftmargin=2\parindent,label=\color{zinc600}{\upshape\textendash}}
\setlist[enumerate,1]{leftmargin=\parindent,label=\color{zinc600}{\upshape\arabic*.}}
\setlist[enumerate,2]{leftmargin=2\parindent,label=\color{zinc600}{\upshape\roman*.}}

% tikz support -----------------------------------------------------------------
\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}

% Table and Figure labelling ---------------------------------------------------
\usepackage{caption}
\usepackage{graphicx}

\DeclareCaptionLabelSeparator{threedash}{\,---\,}
\DeclareCaptionFont{jet}{\color{jet}}
\captionsetup*[table]{format=plain, labelsep=threedash, font={bf}}
\captionsetup*[figure]{format=plain, labelsep=threedash, font={bf}}

% Alternative: Left align captions
% \captionsetup[table]{labelfont=it, textfont={bf}, labelsep=newline, justification=raggedright, singlelinecheck=off}
% \captionsetup[figure]{labelfont=it, textfont={bf}, labelsep=newline, justification=raggedright, singlelinecheck=off}

% multifigure with \caption
% \begin{subfigure}\caption{} \end{subfigure}
\usepackage{subcaption}
\captionsetup*[subfigure]{format=plain, font={jet, footnotesize, bf}}


% Tables -----------------------------------------------------------------------
% Fix \input with tables
% \input fails when \\ is at end of external .tex file
\makeatletter
\let\input\@@input
\makeatother

% Slighty more spacing between rows
\usepackage{array}
\renewcommand\arraystretch{1.2}

% Scale table proportionally to a width
% \begin{adjustbox}{width=\textwidth, center}
%   ...
% \end{adjustbox}
\usepackage{adjustbox}

% Table notes with \notes{...} or \notes[Source:]{...} command
\NewDocumentCommand{\note}{O{Notes.} m g}{%
  \IfNoValueTF{#3}{%
    \parbox{\textwidth}{\footnotesize\vspace*{\medskipamount}%
      \noindent\emph{#1} #2
    }%
  }{%
    \parbox{#2}{\footnotesize\vspace*{\medskipamount}%
      \noindent\emph{#1} #3
    }%
  }
}

% \toprule, \cmidrule, \bottomrule
\usepackage{booktabs}

% If tables are too narrow, fill columns using:
% \begin{tabularx}{\linewidth}{cols}
% col-types: X - center, L - left, R -right
% If you want relative scale for columns: 
% >{\hsize=.8\hsize}X/L/R
\usepackage{tabularx}
\newcolumntype{L}{>{\raggedright\arraybackslash}X}
\newcolumntype{R}{>{\raggedleft\arraybackslash}X}
\newcolumntype{C}{>{\centering\arraybackslash}X}

% Landscape table 
% \begin{landscape} \pagestyle{lscaped} table... \end{landscsape}
% \usepackage{pdflscape} - rotates page left-side up in pdf
% \usepackage{lscape} - does not rotate page, only figure/table
\usepackage{pdflscape}

% For landscape, fix page number location
\usepackage{fancyhdr}
\fancypagestyle{lscaped}{%
    \fancyhf{}
    \renewcommand{\headrulewidth}{0pt}
    \textnormal
    \fancyfoot{%
        \tikz[remember picture,overlay]
        \node[outer sep=2.5cm,above,rotate=90] at (current page.east) {\thepage};
    }
}

