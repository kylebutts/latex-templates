\documentclass[aspectratio=169,t,11pt,table]{beamer}
\usepackage{slides,math}

% Optionally define `accent`/`accent2` colors for theme customization
% I recommend changing the top slider on this: https://hslpicker.com/#1e9400
\definecolor{accent}{HTML}{940034}
\definecolor{accent2}{HTML}{006896}

\title{What is the Effect of X on Y?}
\date{\today}
\author{Kyle Butts}
\addbibresource{references.bib}

\begin{document}

% ------------------------------------------------------------------------------
\begin{frame}[noframenumbering,plain]
\maketitle

% \bottomleft{\footnotesize $^*$A bit of extra info here. Add an asterich to title or author}
\end{frame}
% ------------------------------------------------------------------------------

\begin{frame}{Customizing template}
  At the top of the template is two accent color definitions. Change these and they should populate throughout the slides.
\end{frame}

% ------------------------------------------------------------------------------
\section{Common Items}
% ------------------------------------------------------------------------------

\begin{frame}{Components}\label{main1}
  This section highlights commonly used components and their theming

  \begin{itemize}
    \item Can emphasize with \alert{the alert command} which uses the \texttt{accent2} color
    
    \begin{itemize}
      \item This allows you to draw attention to specific words/phrases
    \end{itemize}
    
    \item To include things in appendix, you must first label the slide and the appendix slide and then include a hyperlink. The command \texttt{\textbackslash bottomleft} will position in the bottom left corner nicely
  \end{itemize}

  \bottomleft{
    \hyperlink{appendix1}{\beamergotobutton{Appendix}}
    \beamergotobutton{Button 2} 
  }
\end{frame}

\begin{frame}{Numbered Lists}
  You can also use numbered items that look a bit more professional

  \begin{enumerate}
    \item Pretty good
    
    \item To include things in appendix
  \end{enumerate}
\end{frame}

\begin{frame}{Citations}
  Topic 1: Spatial Frictions
  \citecolor{
    [\citet{Fajgelbaum_Morales_Serrato_Zidar_2018}, \citet{Hsieh_Moretti_2019}, and \citet{Moretti_2011}]
  }

  \vspace{5mm}
  Topic 2: Blah 
  \citecolor{
    [\citet{SuÃ¡rez_Serrato_Zidar_2016}]
  }
\end{frame}

\begin{frame}{Colors}
  I have a set of colors that I use:

  \navy{navy},
  \raspberry{raspberry},
  \cranberry{cranberry},
  \orange{orange},
  \purple{purple},
  \blue{blue},
  \green{green},
  \rose{rose}, and 
  \yellow{yellow}

  \bigskip
  If you want to color text with them, use \texttt{\textbackslash colorname\{...\}}
\end{frame}

\begin{frame}{Color boxes}
  You can also use color boxes. Some of the colors look ugly when made lighter, so I won't show them:

  \bgNavy{bgNavy},
  \bgRaspberry{bgRaspberry},
  \bgCranberry{bgCranberry},
  \bgOrange{bgOrange},
  \bgPurple{bgPurple},
  \bgGreen{bgGreen},
  \bgYellow{bgYellow}

  \bigskip
  If you want to color text with them, use \texttt{\textbackslash bgColorname\{...\}}
\end{frame}

\begin{frame}{Highlight Math}
  Can also highlight in an equation with \texttt{\textbackslash tcbhighmath[colback = bgColor]\{...\}}. If you don't include the brackets, it will default to \texttt{bgRaspberry}.
  
  $$
    \int_{ \tcbhighmath[colback = bgNavy]{\Omega} } f(x) \, dx \approx 
    \frac{\tcbhighmath[colback = bgRaspberry]{ |\Omega| }}{N} 
    \sum_{i=1}^{N} f( \tcbhighmath[colback = bgPurple]{ X_i } )
  $$
\end{frame}

\begin{frame}[fragile]{Code listings}
  The \texttt{codeblock} environment lets you copy text verbatim. It is important you use \texttt{[fragile]} as a frame option in beamer

\begin{codeblock}
library(fixest)
feols(mpg ~ 1, data = mtcars)
#> OLS estimation, Dep. Var.: mpg
#> Observations: 32
#>             Estimate Std. Error t value  Pr(>|t|)    
#> (Intercept)  20.0906    1.06542 18.8569 < 2.2e-16 ***
#> ---
#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
\end{codeblock}
\end{frame}

\begin{frame}{Blocks}
  \begin{block}{Theorem 1}
  The main specificaiton is as follows: 
  $$
    y_{it} = X_{it} \beta + \mu_i + \varepsilon_{it}
  $$
  \end{block}
\end{frame}

\begin{frame}{Blocks}
  If you want something more colorful, use \texttt{colornameBlock}
  \begin{purpleBlock}{}
    This is a purple block
  \end{purpleBlock}

  \begin{cranberryBlock}{With Title}
  This is a cranberry block
  \end{cranberryBlock}
\end{frame}

\begin{frame}{Two Columns}
  \begin{columns}[T]
    \begin{column}{.50\textwidth}
      \vspace{0pt}
      % {\color{zinc400}\rule{\linewidth}{2pt}}
      Column 1

      \begin{enumerate}
        \item Bullet points for this column that can go over lines
        \item b
        \item c
      \end{enumerate}
    \end{column}
    
    \hfill
    
    \begin{column}{.50\textwidth}
      % {\color{zinc400}\rule{\linewidth}{2pt}}
      Column 2

      \begin{itemize}
        \item a
        \item b
        \item c
      \end{itemize}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}{Two Columns with Figure}
  \begin{columns}[T]
    \begin{column}{.6\textwidth}
      \includegraphics[width=\textwidth]{figures/plot_did2s_retail_slides.pdf}
    \end{column}
    \hfill
    \begin{column}{.4\textwidth}
      A point about the figure that is potentially important.
      
      \bigskip
      Another point about the figure that is also potentially important.
    \end{column}
  \end{columns}
\end{frame}

% ------------------------------------------------------------------------------
\section{Table}
% ------------------------------------------------------------------------------

\begin{frame}{Table with cell / row highlighting}{}
  Use \texttt{\textbackslash cellcolor<\#>\{color\}} and \texttt{\textbackslash rowcolor<\#>\{color\}} to color cell / row. The \texttt{<\#>} is an optional overlay specification

  \bigskip
  \begin{center}
    {\footnotesize\textsc{Outcome:} Log of Real Per Capita Income \\}
    
    \bigskip
    \begin{tabular}{l cc}
      \toprule
      & (1) & (2) \\
      \midrule
      Policy Enacted $= 1$ & \cellcolor<1>{accent!15!white} 0.0694* & \cellcolor<2>{accent!15!white} 0.0713** \\
      & (0.0401) & (0.0381) \\
      \hline
      \rowcolor<3>{accent!15!white} State Fixed Effects & & $\checkmark$ \\
      Observations & 1,673 & 1,673 \\
      \bottomrule
    \end{tabular}
  \end{center}
\end{frame}

\begin{frame}{Table}
  \begin{columns}[T]
  \begin{column}{.4\textwidth}
    \begin{adjustbox}{max width = \textwidth, center}
      \begin{tabular}{@{} l *{2}{r} @{}} 
        \toprule
        & (1) & (2)\\ 
        \midrule
        
        \only<2>{
          \marktopleft{ex1}Handling of Complaints & 0.692$^{***}$& 0.682$^{***}$ \\ 
          &  (0.149) & (0.129) \markbottomright{ex1} \\
        }
        \only<1>{
          Handling of Complaints & 0.692$^{***}$& 0.682$^{***}$ \\ 
          &  (0.149) & (0.129) \\
        }
        No Special Privileges & -0.104 & $-$0.103  \\ 
        & (0.135) & (0.129) \\
        Opportunity to Learn & 0.249 & 0.238$^{*}$ \\ 
        & (0.160) & (0.139) \\
        
        \midrule 
        Observations & 30 & 30 \\ 
        R$^{2}$ & 0.715 & 0.715 \\ 
        \bottomrule

      \end{tabular}   
    \end{adjustbox}
      
    \note{$^{*} p<0.1$; $^{**} p<0.05$; $^{***} p<0.01$.}
  \end{column}
  \hfill
  \begin{column}{.5\textwidth}
    \begin{itemize}
      \item Use \texttt{\textbackslash marktopleft\{name\}} and \texttt{\textbackslash markbottomright\{name\}} within the table to create box.
      \item Using \texttt{\textbackslash only} or \texttt{\textbackslash on} lets you conditionally display box
    \end{itemize}
  \end{column}
  \end{columns}
\end{frame}

% ------------------------------------------------------------------------------
\section{Figures}
% ------------------------------------------------------------------------------

\begin{frame}{Figure}{Full-size Figures}
  You can use the command \texttt{\textbackslash imageframe\{img-path\}} and it will create a full-frame of a picture. 
  
  \begin{itemize}
  \item Ideally, your figure is the same aspect as the frame (\texttt{4:3} or \texttt{16:9}) or else there will be white space in one of the directions.
  \end{itemize}
\end{frame}

% Try to make figures the correct aspect ratio otherwise white will be filled in around the image
\imageframe{figures/plot_did2s_retail_slides.pdf}

\begin{frame}{Figure}
  \begin{figure}
    \begin{adjustbox}{width = 0.75\textwidth, center}
      \includegraphics{figures/plot_did2s_retail_slides.pdf}
    \end{adjustbox}
  
    \vspace*{-\medskipamount}
    \note{0.75\textwidth}{The \texttt{adjustbox} environment helps resize figures/tables}
  \end{figure}
\end{frame}

\section{Advanced Tools}

\begin{frame}[fragile]{Overlaying objects}
  This template provides some tools to make overlaying text / objects over the slides easier (an e.g. of this is the \texttt{\textbackslash bottomleft} overlay buttons). This feature is heavily inspired from Keenan Crane's excellent slides.

  \bigskip
  To use this, you can 
  \begin{codeblock}[tex]
\begin{tikzpicture}[remember picture, overlay]
  \node [text width = 0.3\textwidth] at (page cs: x, y)
\end{tikzpicture}
  \end{codeblock}
  where \texttt{x, y} are the x and y coordinates of the slide and are between 0.0 and 1.0.


\end{frame}

\begin{frame}{}
  \medskip\medskip
  \parbox[]{0.8\textwidth}{
  
    \textit{Proof.} First note that, since the $X_i$ are independent,
    \[
      \text{Var} \left( \overline{X}_N \right) = \text{Var} \left( \frac{1}{N} \sum_{i=1}^{N} X_i \right) = \frac{1}{N^2} \sum_{i=1}^{N} \text{Var}(X_i) = \frac{\sigma^2}{N}.
    \]
    
    From Chebyshev's inequality, we then have
    \[
      P\left( |\overline{X}_N - \mu| \geq \varepsilon \right) \leq \frac{\text{Var}[\overline{X}_N]}{\varepsilon^2} = \frac{\sigma^2}{N^2 \varepsilon^2},
    \]
    and
    \[
      \lim_{N \to \infty} \frac{\sigma^2}{N^2 \varepsilon^2} = 0.
    \]

  }

  % \devgrid{}

  \begin{tikzpicture}[remember picture, overlay]
    \coordinate (arrow1_a) at (page cs:0.8, 0.37);
    \coordinate (arrow1_b) at (page cs:0.7, 0.21);
    \draw (arrow1_a) edge[zinc500, out = 100, in = 0, line width = 0.6mm, -Stealth] (arrow1_b);

    \coordinate (arrow2_a) at (page cs:0.72, 0.54);
    \coordinate (arrow2_b) at (page cs:0.57, 0.54);
    \draw (arrow2_a) edge[zinc500, out = -150, in = -40, line width = 0.6mm, -Stealth] (arrow2_b);

    \node [text width = 0.34\textwidth, rotate = 1] at (page cs:0.8,0.44) {
      \begin{tcolorbox}[
        enhanced,
        width = \textwidth,
        colback = white,
        colframe = zinc300, 
        boxrule = 0.4mm,
        arc = 0.5mm,
        % sharp corners, 
        left = 0.5mm, right = 0.5mm,
        top = 1mm, bottom = 1mm,
        fuzzy shadow = {0mm}{-0.5mm}{-1pt}{0.2mm}{zinc300},
        fontupper = \rmfamily,
        % drop fuzzy shadow
      ]
        \setstretch{1}
        {\small
          \textbf{In summary:} averaging reduces variance; 
          Chebyshev says that random variables with small variance will be close to their mean.
        }
      \end{tcolorbox}
    };

  \end{tikzpicture}
\end{frame}

\begin{frame}{Example of labelling equations}
  % \devgrid

  We can use monte carlo simulation to draw $N$ observations from the domain $\Omega$:

  \medskip
  $$
    \int_{ \Omega } f(x) \, dx \approx 
    \frac{\tcbhighmath{ |\Omega| }}{N} 
    \sum_{i=1}^{N} f( \tcbhighmath{ X_i } )
  $$

  \begin{tikzpicture}[remember picture, overlay]
    \node [anchor = south, text width = 0.12\textwidth] at (page cs:0.45,0.375) {
      \begin{center}
        \setstretch{0.7}
        {\footnotesize\color{raspberry} \emph{volume of domain}}
      \end{center}
    };
    
    \node [anchor = north, text width = 0.1\textwidth] at (page cs:0.65,0.41) {
      \begin{center}
        \setstretch{0.7}
        {\footnotesize\color{raspberry} \emph{Draw from $\Omega$}}
      \end{center}
    };
  \end{tikzpicture}
\end{frame}

\begin{frame}{}
  \devgrid 

  It can be a bit tedious to try and place these elements. For that reason, I added \texttt{\textbackslash devgrid} command that will lay every 0.1 unit of the slide. Counting will get you in the ball park and manual tweaking will finish the job.
  
  % Absolute positioned tikzpicture
  \begin{tikzpicture}[remember picture, overlay]
    \node[anchor = north west] (topleft)
      at (page cs:0.0, 0.0) { $\blacksquare$ };
    \node[anchor = north east] (topright)
      at (page cs:1.0, 0.0) { $\blacksquare$ };
    \node[anchor = south west] (bottomleft) 
      at (page cs:0.0, 1.0) { $\blacksquare$ };
    \node[anchor = south east] (bottomright) 
      at (page cs:1.0, 1.0) { $\blacksquare$ };
  \end{tikzpicture}
\end{frame}





% ------------------------------------------------------------------------------
\begin{frame}[allowframebreaks,noframenumbering]{References}
  \thispagestyle{empty}
  \printbibliography
\end{frame}
\appendix
% ------------------------------------------------------------------------------

\begin{frame}{Appendix Slide}{Summary Slides}\label{appendix1}
  \begin{table}[t]
    % \caption{Summary Statistics}\label{tab:summary_stats}
    \begin{adjustbox}{width = 0.8\textwidth}
      \begin{tabular}{@{} lccccccc @{}} 
        \toprule
        Statistic & \multicolumn{1}{c}{N} & \multicolumn{1}{c}{Mean} & \multicolumn{1}{c}{St. Dev.} & \multicolumn{1}{c}{Min} & \multicolumn{1}{c}{Pctl(25)} & \multicolumn{1}{c}{Pctl(75)} & \multicolumn{1}{c}{Max} \\ 
        \hline \\[-1.8ex] 
        rating & 30 & 64.633 & 12.173 & 40 & 58.8 & 71.8 & 85 \\ 
        complaints & 30 & 66.600 & 13.315 & 37 & 58.5 & 77 & 90 \\ 
        privileges & 30 & 53.133 & 12.235 & 30 & 45 & 62.5 & 83 \\ 
        learning & 30 & 56.367 & 11.737 & 34 & 47 & 66.8 & 75 \\ 
        raises & 30 & 64.633 & 10.397 & 43 & 58.2 & 71 & 88 \\ 
        \bottomrule
      \end{tabular} 
    \end{adjustbox}
    
    \note{0.8\textwidth}{Using R base dataframe \texttt{attitude}. I use my custom \texttt{\textbackslash note} command for notes}
  \end{table}

  \bottomleft{
    \hyperlink{main1}{\beamerreturnbutton{Back}}}
  % \bottomright{\hyperlink{main1}{\beamerreturnbutton{Back}}}
\end{frame}

\end{document}
